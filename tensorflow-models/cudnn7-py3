FROM pkdogcom/tensorflow:cudnn7-py3
LABEL maintainer pkdogcom@gmail.com

ENV MODELS_HOME=/root/tensorflow/models

ENV PYTHONPATH=$PYTHONPATH:$MODELS_HOME:$MODELS_HOME/research/slim:$MODELS_HOME/research

# Install protobuf 3
RUN apt-get install -y software-properties-common python3-software-properties && \
    add-apt-repository -y ppa:maarten-fonville/protobuf && apt-get update && \
    apt-get install -y protobuf-compiler

# Download and setup Tensorflow Models
RUN git clone https://github.com/tensorflow/models.git $MODELS_HOME && \
    cd $MODELS_HOME/research && protoc object_detection/protos/*.proto --python_out=. 

WORKDIR /root
